(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1271:function(e,t,r){var n,i;n=[r(3),r(441),r(18),r(1),r(13),r(16),r(8),r(23),r(2),r(4),r(17),r(194),r(27),r(139),r(6),r(190),r(160),r(304),r(428),r(158),r(51),r(107),r(36),r(187),r(188),r(156),r(425),r(41),r(426),r(191),r(1127),r(189),r(0),r(296),r(1126),r(17)],void 0===(i=function(e,t,n,i,a,s,o,d,l,c,u,g,m,h,f,p,v,w,y,b,S,I,F,E,C,T,U,P,A,V,D,L,N,k,Q,R){"use strict";return{run:function(b){function I(e){var t=a.parseUrl(e||"");return!(!t.user||!t.password)}var W={elements:{},needFeedInfo:null};W.itemListEvents={onReset:function(){W.refreshStream().done()},onMoreItems:function(){l.canFetchFacetsFromServer()||W.setTaggerTags()},onNewItems:function(){W.setTaggerTags()},onProducerChange:function(e){e.hasChanged("flags")&&W.updateUnreadCount(),e.hasChanged("status")&&e.previous("status").progress!==e.get("status").progress&&W.itemList&&(W.itemList.getItems().length?W.itemList.setOption("hasMore",!0):e.isStatusFinish()?b.dispatchEvent("onRefresh"):W.handleIndexInProgress(e.getStatusProgress())),!e.hasChanged("error")||W.hasRenderer()||W._feedUrlWithCredentials||b.dispatchEvent("onRefresh"),e.hasChanged("token")&&(W.cleanFeedUrl(),W.updatePreferences())},onItemChange:function(e){W.isSavedStream()&&e.hasChanged("flags")&&b.dispatchEvent("onRefresh")}},W.getViewName=function(){return b.getValue("view")||b.getValue("view3dd")},W.updatePreferences=function(){var e,t,r,n,i=W.getProducer(),a=W.isFilter(),s=W.isSavedStream(),o=I(b.getValue("feedUrl")),d=!s&&!a&&i&&!i.getToken()&&!o;if(e="feedUrl",t="text",r=d,(n=b.getPreference(e)).type=r?t:"hidden",b.addPreference(n),!l.isIn3DDashboard()){var c={name:"viewHeight",type:"list",label:_("Size"),defaultValue:"short",options:[{label:_("Short"),value:"short"},{label:_("Medium"),value:"medium"},{label:_("Tall"),value:"tall"}]};b.addPreference(c)}W._preferencesShown&&b.isInNativeMode()&&(b.dispatchEvent("onEdit"),W.refreshStream().done()),a&&b.getValue("searchToken")&&b.removeMenu("options/edit")},W.handleIndexInProgress=function(e){if(e&&100===e)W.elements.progressBarContainer.hide(),W.elements.loading.show();else{var t=W.getViewSize();t&&W.elements.progressBarContainer.setStyle("height",t),W.elements.loading.hide(),W.elements.progressBarContainer.show(),W.elements.progressBar.setState(e)}},W.handleFeedError=function(e){var t,r,n=W.getProducer();W.updateTitle(),t=W.isFilter()&&n&&!n.hasUniqueStream()?_("SmartFilters are currently disabled for this dashboard. Ask your dashboard administrator to enable them or remove this widget."):_("Looks like this feed is not valid or currently not responding.");var i=!1,a=!1;if(n){var s=n.getError();s?401===s.code||403===s.code?(a=!0,r=_("This feed is protected by password")):(204===s.code&&(i=!0),r=m.getErrorMessage("stream_"+s.code,{fallback:t})):r=t}else r=t;a?W.showNeedAuth(W.getStreamQuery()):l.isIn3DDashboard()&&e&&"Error: Permission search is needed."===e.message?D.show(b.body):(W.showError(r,void 0,e,i),W.setIcon())},W.onExport=function(){var e=this.elements.exportPanel,t=W.getProducer();if(t){e||(e=this.elements.exportPanel=new y(b,{showAtomButton:!0}).inject(b.body));var r=t.getSelector();r.moduleId&&(r.moduleId=void 0);var n={searches:[r],options:F.formatDateRangeForAPI(b.getValue("date_from"),b.getValue("date_to"))},i=l.Config.mount_points.api+"/searches?"+a.toQueryString({actions:n,format:"atom"});e.setExportFeedUrl(i),e.setExportDataFunction(function(){return f.searches(n,{exportResponseBody:"csv"})}),e.toggle(!0)}},W.getIcon=function(){if(l.isIn3DDashboard())return a.buildUrl(b.getUrl(),"img/3dd-icon.png");if(W.isFilter())return c.getStaticUrl("/themes/base/img/panel/filter.png");if(W.isSavedStream())return a.buildUrl(b.getUrl(),"saved.png");var e=W.getProducer(),t=e&&e.getFaviconURL(!1);return t||void 0},W.setIcon=function(){b.setIcon(W.getIcon())},W.getProducer=function(){return!W.isSavedStream()&&W.itemList&&W.itemList.getProducers()[0]},W.getTitle=function(){var e=W.getProducer(),t=b.getValue("title");return t||(W.isSavedStream()?t=_("Saved Articles"):e&&(t=e.isStream()?e.getTitle().sanitizeHTML():e.getQuery().topic)),t},W.updateTitle=function(){W._filteringQuery||b.setTitle(W.getTitle())},W.hasRenderer=function(){return Boolean(this._reader)},W.display=function(){var e=W.getProducer();if(e){if(e.isStream()?b.getValue("feedUrl")||b.setValue("feedUrl",e.getQuery()):W._filteringQuery||b.setValue("searchQuery",JSON.stringify(e.getQuery())),!e.getQuery()&&!e.hasError())return void W.showNeedFeed();if(e.hasError()&&!W.itemList.getItems().length)return void W.handleFeedError();if(W._feedUrlWithCredentials&&(b.setValue("feedUrl",W._feedUrlWithCredentials),W._feedUrlWithCredentials=null),!e.isStatusFinish()&&!W.itemList.getItems().length)return void W.handleIndexInProgress(e.getStatusProgress())}b.log("FeedReader.display()"),W.updateTitle(),W.setIcon(),W.isFilter()&&S.addExportMenu(b,W.onExport),W.setLoadingState(!1),this._reader&&this._reader.destroy();var t=b.getBool("openOutside")||l.inSubscribePreview,r=this._reader=(l.isIn3DDashboard()?w.createReader:w.createList)({itemList:W.itemList,moduleId:W.getModuleId(),openOutside:t,view:W.getViewName(),isFilteringItems:W.isFilteringItems.bind(W),getFilteredItems:W.getFilteredItems.bind(W),getViewSize:W.getViewSize.bind(W),icon:W.getIcon(),title:W.getTitle()}),n=W.getViewSize();n&&r.getContainer().setStyle("height",n),r.addEvent("onToggleItem",function(){if(W._tagger){var e=W._reader&&W._reader.getDisplayedItem(),t=e?[e]:W.getFilteredItems();W._tagger.updateFocusedSubject(t,!!e)}}),r.inject(W.elements.container),W.updateUnreadCount()},W.updateUnreadCount=function(){b.setCounter(W.isSavedStream()?0:W.getUnread(),"unread")},W.onPodcastPlay=function(e,t){b.isInNativeMode()?l.inSubscribePreview?alert(_("Sorry, this feature is not available in preview mode.")):(W.setRead(e),window.AudioPlayer&&window.AudioPlayer.play(t.link,e.getTitle().stripTags())):W.setRead(e)},W.onDownload=function(e,t){W.setRead(e),b.dispatchEvent("onOpenURL",[t.link])},W.onAddStar=function(e){return b.addStar({title:e.getTitle(),url:e.getLink(),date:e.getPublishTimestamp(),summary:e.getContent().stripTags(),itemId:e.getId(),feed_id:e.getStreamId()}),!0},W.setRead=function(e){e.canFlag("unread")&&e.setFlag("unread",!1).save()},W.showNeedConfig=function(){W.updateTitle(),W.setIcon(),b.body.empty(),b.body.removeClassName("wizard-analyse");var e=N.h;W.intro=new A({restrictedAccess:!l.isAllowed("search")&&"Become VIP",serviceName:_("Tracked Topic"),serviceId:"trackedtopic",serviceDesc:_("Search the content of your dashboard and save the search query. The app will keep updating automatically so you don't miss anything new!"),onBtnClick:function(){M.open()},control:!l.isAllowed("search")&&e(k,{value:_("Learn more"),className:"light-grey medium primary",onClick:function(){window.open(l.getWelcomeURL("vip"))}})}),b.body.setContent(W.intro.getContent()),b.onResize()},W.showNeedFeed=function(){b.setValue("feedUrl",""),W.removeItemList(),W.updateTitle(),W.buildHelp(),b.body.empty();var e=N.h,t=l.isIn3DDPreview()&&"bootstrap_8001"===l.getFailureCode()?e(k,{value:_("Pin to dashboard"),onClick:function(){W.intro.pinToDashboard()}}):e(Q,{onSubmit:W.needFeedSubmit,placeholder:_("Enter a feed URL"),className:"nv-feed-url",name:"needFeed"});W.intro=new A({serviceName:_("Feed Reader"),serviceId:"rss",serviceDesc:_("Read articles on any topic or follow your favorite websites—all from the dashboard."),control:t}),b.body.setContent(W.intro.getContent()),W.needFeed=b.body.getElement(".nv-feed-url"),l.isIn3DDashboard()&&parent.require(["DS/Bookmarklet/Notification"],function(e){var t=UWA.createElement("div"),r=new e;b.body.addContent(t),r.render().inject(t)}),b.onResize()},W.showNeedAuth=function(e){if(l.isAllowed("authenticate_source")){var t=UWA.createElement("form",{class:"need-auth-form",events:{submit:W.needAuthSubmit.bind(null,e)}});UWA.createElement("h2",{text:" "+_("This feed is protected by password"),class:"need-auth-form-title"}).inject(t),W.needLogin=new o.Text({attributes:{name:"needLogin",placeholder:_("Username")}}).inject(t),W.needPwd=new o.Text({attributes:{name:"needPwd",type:"password",placeholder:_("Password")},className:"password"}).inject(t),l.isIn3DDashboard()&&UWA.createElement("div",{class:"uwa-message credentials-disclaimer",html:[UWA.createElement("span",{class:"uwa-icon tooltip"}),UWA.createElement("div",{text:" "+_("I acknowledge and agree that my password used to access, through Netvibes, the services provided by third parties will be stored on Netvibes’ server for the lifetime of the corresponding third party’s App, and shall be encrypted in such a way to allow me to access the said services.")})]}).inject(t),new o.Button({value:_("Add"),className:"green medium",attributes:{type:"submit"}}).inject(t),b.body.setContent(t)}else W.showSecureDisabled()},W.needAuthSubmit=function(t,r){e.stop(r);var n=W.needLogin.getValue()+":"+W.needPwd.getValue()+"@",i=a.parseUrl(t);i=a.composeUrl({protocol:i.protocol,authority:n+i.domain,path:i.path,directoryPath:i.directoryPath,fileName:i.fileName,query:i.query,anchor:i.anchor}),a.isValidUrl(i)&&(W._feedUrlWithCredentials=i,b.dispatchEvent("onRefresh"))},W.closeMessage=function(t){e.stop(t),e.getElement(t).getParent(".uwa-message").remove(),W.showNeedFeed()},W.needFeedSubmit=function(t){var r=b.getElement(".widget-intro-body-button"),n=b.getElement(".nv-feed-url");e.stop(t);var a=W.needFeed.value;if(a&&a.length>0){if(I(a)&&!l.isAllowed("authenticate_source"))return void W.showSecureDisabled();r.setContent(new P({size:20,color:l.isIn3DDashboard()?"#42A2DA":"#ffffff"})).set("disabled","disabled").addClassName("disabled"),n.set("disabled","disabled").addClassName("disabled"),(l.isStreamApiAvailable()?f.widgetPreview({query:a}).then(function(e){if(e.length){var t=e.map(function(e){return{url:e.data.feedUrl,title:e.title}}).filter(function(e){return Boolean(e.url)});return t.length>1?t:1===t.length?t[0].url:a}return a},function(e){return"error_401"===e?(W.showNeedAuth(a),!1):a}):s.resolve(a)).done(function(e){i.is(e,"array")?W.showStreamsSelector(e):e&&(b.setValue("feedUrl",e),b.dispatchEvent("onRefresh"))})}else b.isInNativeMode()&&W.showError(W.needFeedInfo,"warning")},W.showStreamsSelector=function(t){var r=UWA.createElement,n=r("div",{class:"nv-streamsselector-container",html:[r("span",{class:"uwa-icon nv-streamsselector-close","data-icon":"p"}),r("div",{class:"nv-streamsselector-intructions",text:"Select a feed"}),r("div",{class:"nv-streams-list",html:t.map(function(t){return r("div",{class:"nv-stream-row",html:r("div",{class:"nv-stream",html:[r("a",{class:"nv-stream-icon-link",href:t.url,target:"_blank",html:r("img",{src:c.getFaviconUrl(t.url)||c.getStaticUrl("/img/file.png")}),events:{click:function(t){e.stopPropagation(t)}}}),r("span",{class:"nv-stream-title",text:t.title})]}),"data-feedurl":t.url})})})]});b.body.setContent(n);var i=new d({element:n.getElement(".nv-streams-list"),shadows:!0});i.showShadow("y-start",100),n.addEvent("click .nv-streamsselector-close, .nv-stream-row",function(t){var r=e.getElement(t);if(r.hasClassName("nv-stream-row")){var n=r.getAttribute("data-feedurl");b.setValue("feedUrl",n)}i.destroy(),B()})},W.clickNeedFeedInfo=function(t){e.stop(t),W.showError(W.needFeedInfo,"notice")},W.buildHelp=function(){W.needFeedInfo=UWA.createElement("p",{"data-icon":"I"}).addContent([" "+_("Locate the feed address on the website. It is usually represented with one of the following icons:")+" ",UWA.createElement("img",{src:c.getStaticUrl("/img/rss-icons.png"),class:"rss-icons"}),UWA.createElement("br"),_("Copy and paste this address above.")+" ",_("If you don't see the feed address, you can try to enter the website address instead.")+" ",UWA.createElement("br"),_("We will try to autodiscover it.")+" ",l.Config.urls.faq&&c.isStartpage?UWA.createElement("a",{href:l.Config.urls.faq,text:_("Get more information about feeds.")}):""])},W.showSecureDisabled=function(){var e=W.getProducer(),t=e&&e.getQuery(),r=W.getStreamQuery();W.showMessage(m.getErrorMessage("stream_702")),I(r)&&b.setValue("feedUrl",t||""),r!==t&&UWA.createElement("a",{text:_("Back"),class:"secure-disabled-back"}).addEvent("click",function(){b.dispatchEvent("onRefresh")}).inject(b.body)},W.showMessage=function(e,t){var r=UWA.createElement("div",{class:"uwa-message simple"}).setContent(e);t?r.inject(t):b.body.setContent(r)},W.showError=function(e,t,r,n){t=void 0!==t?t:"simple",e=UWA.is(e,"string")?UWA.createElement("p",{text:e}):e;var i=UWA.createElement("div",{class:"uwa-message "+t+" uwa-icon ",html:e}),a=UWA.createElement("div",{class:"nv-feed-reader-message",html:i});l.isIn3DDashboard()&&!n&&UWA.createElement("a",{class:"uwa-icon feed-info-close",title:_("Close"),"data-icon":","}).addEvent("click",this.closeMessage.bind(this)).inject(i,"top");var s=W.getViewSize();s&&a.setStyle("height",s),b.body.setContent(a),r&&b.log("Error: "+r.message)},W.buildSkeleton=function(){b.body.empty();var e=W.elements;b.body.addClassName("rssreader").toggleClassName("no-touch",!n.Features.touchEvents).toggleClassName("threeddashboard",l.isIn3DDashboard()).toggleClassName("native-mode",b.isInNativeMode()).toggleClassName("not-native-mode",!b.isInNativeMode()),b.body.addContent(e.progressBarContainer=UWA.createElement("div",{class:"nv-feed-reader-message",html:UWA.createElement("div",{class:"uwa-message simple",html:e.progressBar=new U({title:_("Please wait for data indexing to complete"),progress:null})})}).hide(),e.loading=b.createElement("div",{class:"loading",text:_("Loading...")}),e.container=b.createElement("div",{class:"rssreader-container"})),W.setLoadingState(!0),C.hasSnapshot(b)&&b.body.addContent(C.buildSnapshotOverlay()),W.isSavedStream()||S.addAnalyzeMenu(b,function(){var e={item:{}},t=W.getProducer();return t&&(e.nbDays=S.getNbDaysFromItemList(W.itemList),W.isFilter()?(e.item.query=t.getQuery(),e.item.label=t.getQuery().topic):(e.item.query={topic:"*:*",context:{feed:[t.getTitle()]}},e.item.label=t.getTitle())),e})},W.setLoadingState=function(e){e?(W.elements.loading.show(),W.elements.container.hide()):(W.elements.loading.hide(),W.elements.container.show())},W.getUnread=function(){return W.itemList?W.itemList.getTotalFlagCount("unread"):0},W.mutate=function(){var e=W.getProducer();e&&"twitter-search"===e.getType()&&b.mutate("ExtendedVibes",{activeTab:"twitter-search",feedIds:"twitter-search:"+e.getId(),mySearch:e.getQuery().topic,type:"twitter-search"})},W.isFilter=function(){return Boolean(b.getValue("searchIds")||!b.getValue("streamIds")&&b.getValue("searchQuery")||"SmartFilter"===g.getName(b.getUrl()))},W.isSecureFeed=function(){if(W.isFilter()||W.isSavedStream())return!1;var e=W.getStreamQuery(),t=W.getProducer();return I(e)||t&&t.getToken()&&!W._filteringQuery},W.getStreamQuery=function(){if(W.isFilter())throw new Error("The widget is a filter");return W._feedUrlWithCredentials||b.getValue("feedUrl")},W.getSearchQuery=function(){if(!W.isFilter())throw new Error("The widget is a stream");return!!b.getValue("searchQuery")&&JSON.parse(b.getValue("searchQuery"))},W.getId=function(){return b.getValue(W.isFilter()?"searchIds":"streamIds")},W.getModule=function(){return u.getFromWidget(b)},W.getModuleId=function(){var e=W.getModule();return e&&e.getId()},W.isSavedStream=function(){return b.getBool("savedStream")},W.isConfigured=function(){return(W.isFilter()?W.getSearchQuery():W.getStreamQuery())||W.getId()||W.isSavedStream()},W.launchStream=function(){var e,t=W.isFilter(),n=W.isSavedStream(),i=t?W.getSearchQuery():W.getStreamQuery(),a=W.getId(),o=W.getProducer(),d=!a||o&&!UWA.equals(o.getQuery(),i),c=W.isConfigured();c&&W._filteringQuery&&(d=!0,i=W._filteringQuery,e={type:"preview"});var u=n?{}:d?{query:i}:{id:a};function g(e,r){W.removeItemList(),W.itemList=r;var i=W.getProducer();if(!W.isSavedStream()&&i&&"twitter-search"===i.getType())W.mutate();else{if(r.addEvents(W.itemListEvents),r.startUpdate(),!W._filteringQuery&&!n&&e&&e.areDataStored()&&i&&b.setValue(t?"searchIds":"streamIds",i.getId()),b.getValue("view")||b.setValue("view",w.getBestView(r)),W.cleanFeedUrl(),W.isSecureFeed()&&!l.isAllowed("authenticate_source"))return void W.showSecureDisabled();W.updatePreferences(),W.display(),W.setTaggerTags()}}function m(e){console.log(e.stack||e),W.handleFeedError(e)}function f(t){t.fetch(u,e).done(g.bind(null,t),m)}e=Object.assign(e||{},{limit:w.getItemCountGoal(W.getViewName(),b.getValue("viewHeight")),ignoreProducerErrors:!0},F.formatDateRangeForAPI(b.getValue("date_from"),b.getValue("date_to"))),n&&(e.type="saved"),u.moduleId=W.getModuleId(),C.hasSnapshot(b)?g(null,new p([],C.getSnapshot(b).map(v.factory))):c?t||W._filteringQuery?f(h):l.isStreamApiAvailable()?f(T):s.all([r.e(0),r.e(119)]).then(function(){var e=[r(1295)];(function(e){f(e)}).apply(null,e)}).catch(r.oe):W.isFilter()&&!W.getId()?W.showNeedConfig():W.showNeedFeed()},W.refreshStream=function(){return W.itemList.getSlice(null,w.getItemCountGoal(W.getViewName(),b.getValue("viewHeight"))).then(W.display.bind(this),W.handleFeedError.bind(this))},W.getViewSize=function(){return w.getViewSize(W.getViewName(),b.getValue("viewHeight"))},W.getFilteredItems=function(){var e=W.itemList.getItems();return W.getTopicFilteredItems(W.getFunctionFilteredTopic(e))},W.getTopicFilteredItems=function(e){if(e=e||W.itemList.getItems(),W._filteringTopic){var t=W._filteringTopic.split(/\s+/).map(function(e){return new RegExp(e.escapeRegExp(),"i")}),r=function(e){return t.every(function(t){return t.test(e)})};e=e.filter(function(e){return r(e.getTitle())||r(e.getContent())||e.getAuthors().some(function(e){return r(e.name)})})}return e},W.getFunctionFilteredTopic=function(e){return e=e||W.itemList.getItems(),W._filteringFunction&&(e=e.filter(W._filteringFunction)),e},W.isFilteringItems=function(){return Boolean(W._filteringTopic||W._filteringFunction)},W.onSearchChange=function(e){l.isIn3DDashboard()&&l.canFetchFacetsFromServer()?W._tagger.setSearch(e):(W._filteringTopic=e,l.isIn3DDashboard()&&L(l.get3DDPlatformId()).setSearchTopic(W._filteringTopic),W.refreshStream().done(W.setTaggerTags.bind(W)))},W.onTaggerFilters=function(e){W.asideRenderer||(i.is(e,"function")||!1===e?(this._filteringFunction=e,this.refreshStream().done()):(this._filteringQuery=e,B()))},W.setTaggerTags=function(){if(this._tagger){var e=this._reader&&this._reader.getDisplayedItem(),t=e?[e]:W.getTopicFilteredItems();this._tagger.setTags(t,!!e)}},W.cleanFeedUrl=function(){if(!W.isFilter()){var e=W.getStreamQuery(),t=W.getProducer();I(e)&&t&&(t.getToken()||!l.isStreamApiAvailable())&&b.setValue("feedUrl",t.getQuery())}},W.buildQuery=function(e){var t,r;return W.isFilter()?(t=W.getSearchQuery())&&(r={raw:t.topic,and:[]},b.getValue("date_from")&&r.and.push({type:"from",value:b.getValue("date_from")}),b.getValue("date_to")&&r.and.push({type:"to",value:b.getValue("date_to")}),e&&(r.and=r.and.concat(e)),t.topic=V.buildQuery(r)):(r={and:[{type:"stream_id",value:W.getId()}]},e&&(r.and=r.and.concat(e)),t={topic:V.buildQuery(r)}),t},W.removeItemList=function(){W.itemList&&(W.itemList.destroy(),W.itemList=null)},E.registerWizard(b,"Potion",{getOptions:function(){var e={};return W.isFilter()?e.presetIngredients={triggers:[{ingredient:"com.netvibes.search",name:"com.netvibes.dashboard.{id}.search.{uuid}.article.new",reference:"new_article",config:{general:{id:l.Page.id,uuid:b.getValue("searchIds")}}}]}:e.presetIngredients={triggers:[{ingredient:"com.netvibes.stream",name:"com.netvibes.dashboard.{id}.stream.{uuid}.article.new",reference:"new_article",config:{general:{id:l.Page.id,uuid:b.getValue("streamIds"),feed:b.getTitle()}}}]},e},getMenu:function(){var e=u.getFromWidget(b);if((!e||!e.isPreview())&&W.isConfigured()&&l.isAllowed("potion")&&l.isAllowed("search"))return{name:"potion",label:_("Potion"),icon:"potion"}}});var x,M=E.registerWizard(b,"SocialPack",{getOptions:function(){return{isSmartFilter:!0,query:W.getSearchQuery()}},getMenu:function(){if(W.isFilter()&&l.isAllowed("search"))return{}}});function B(){function e(){l.isIn3DDashboard()&&W.isFilter()&&!l.isAllowed("search")?D.show(b.body):(W.updatePreferences(),W.buildSkeleton(),W.launchStream())}l.isIn3DDashboard()?(r.e(7).then(function(){var t=[r(1150)];(function(t){W._tagger||(W._tagger=new t(b,W.onTaggerFilters.bind(W),W.buildQuery.bind(W)));var r=L(l.get3DDPlatformId()),n=Boolean(W._filteringQuery||W._filteringTopic);r.getSearchTopic()&&!n?l.canFetchFacetsFromServer()?W._tagger.setSearch(r.getSearchTopic()):(W._filteringTopic=r.getSearchTopic(),e()):e()}).apply(null,t)}).catch(r.oe),W.updateTitle(),W.isFilter()||x||window.require(["DS/TopBarProxy/TopBarProxy"],function(e){s.resolve().then(function(){var t=[r(443)];(function(t){(x=new e({id:b.id})).setContent({share:[{label:_("Add to library"),onExecute:function(){var e=u.getFromWidget(b);new t(e).inject(e.getContainer()).toggle(!0)}}]})}).apply(null,t)}).catch(r.oe)})):e()}b.onKeyboardEnter=function(){W._reader&&W._reader.focusFirstItem()},b.onResetUnreadCount=function(){var e=W.itemList;e&&e.canFlag("unread")&&e.setFlags("unread",!1)},b.onResize=function(){if(l.isIn3DDashboard()&&W.intro){var e=b.body.getParent();W.intro.verticalResponsive(e)}},b.onRemove=function(){W.removeItemList()},b.onEdit=function(){W._preferencesShown=!1,W.updatePreferences(),W._preferencesShown=!0},b.onCloseEdit=function(){W._preferencesShown=!1},b.updatePreferences=W.updatePreferences,b.isInNativeMode=function(){return!!(t&&this.environment instanceof t)},b.addEvents({onBlacklistClick:function(e){var t=this;e.data.map(function(e){return f.submitBlacklistEntity(e).done(function(){e.resolved(e.success),t.dispatchEvent("onCorpusChange")},e.rejected)})},onCorpusChange:function(){R.refreshModules(["CorpusManager","RssReader","SocialPack_Analytics","SmartFilter","ExtendedVibes"])},onRefresh:B,onLoad:B,onSearch:W.onSearchChange,onResetSearch:W.onSearchChange.bind(W,null)})}}}.apply(t,n))||(e.exports=i)}}]);